<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Vue</title>
</head>

<body>
    <header>
        <h2>前端a标签下载文件</h2>
    </header>
    <ul id="example-nav" class="nav nav-tabs">
        <li role="presentation" id="example-result-btn" class="active" onclick="showResult()">
            <a href="#">Result</a>
        </li>
        <li role="presentation" id="example-js-btn" class="" onclick="showJs()">
            <a href="#">JS</a>
        </li>
        <li role="presentation" id="example-html-btn" class="" onclick="showHtml()">
            <a href="#">HTML</a>
        </li>
    </ul>

    <article>
        <iframe id="example-result" width="100%" height="800" frameborder="0" src="js/download"></iframe>
        <div id="example-js" class="hidden">
            <pre class="prettyprint source">    
    //a标签 id
    function downloadFile(id) {
        var href = document.getElementById(id).href;
        var index = href.lastIndexOf("\.");
        var suffix = href.substring(index, href.length); //截取后缀名成（比如：.ceb、.docx等等）
        //重新命名下载文件名称（不赋值download属性，浏览器会默认下载文件名称包括后缀名比如：搭建Express项目.docx！如果需要改名的话需要拼接名称和后缀名）
        document.getElementById(id).download = 'Express' + suffix;
        document.getElementById(id).click(); //模拟点击实现下载
    }
            </pre>
        </div>
        <div id="example-html" class="hidden">
            <pre class="prettyprint source">
    &lt;head>
        &lt;meta charset="utf-8">
        &lt;title>Web Dragon&lt;/title>
    &lt;/head>
    
    &lt;body>
        &lt;a href="/File/搭建Express项目.docx" download="" id="hf" style="display:none;"> &lt;/a>
        &lt;button type="button" onclick="downloadFile('hf')"> &lt;/button>
    &lt;/body>
            </pre>
        </div>
    </article>
    <script>
        prettyPrint();
        var exampleResult = document.getElementById('example-result');
        var exampleJs = document.getElementById('example-js');
        var exampleHtml = document.getElementById('example-html');

        var exampleResultBtn = document.getElementById('example-result-btn');
        var exampleJsBtn = document.getElementById('example-js-btn');
        var exampleHtmlBtn = document.getElementById('example-html-btn');

        function setActive(el) {
            el.className += ' active';
        }

        function setInactive(el) {
            el.className = el.className.replace(/\s*active\s*/g, '');
        }

        function show(el) {
            el.className = el.className.replace(/\s*hidden\s*/g, '');
        }

        function hide(el) {
            el.className += ' hidden';
        }

        function showJs() {
            hide(exampleHtml);
            hide(exampleResult);
            setInactive(exampleHtmlBtn);
            setInactive(exampleResultBtn);

            show(exampleJs);
            setActive(exampleJsBtn);
        }

        function showHtml() {
            hide(exampleJs);
            hide(exampleResult);
            setInactive(exampleJsBtn);
            setInactive(exampleResultBtn);

            show(exampleHtml);
            setActive(exampleHtmlBtn);
        }

        function showResult() {
            hide(exampleJs);
            hide(exampleHtml);
            setInactive(exampleJsBtn);
            setInactive(exampleHtmlBtn);

            show(exampleResult);
            setActive(exampleResultBtn);
        }
    </script>
</body>